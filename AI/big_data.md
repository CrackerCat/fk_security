# big data
## 分布式应用
	分布式应用可以在给定时间（同时）在网络中的多个系统上运行，通过协调它们以快速有效的方式完成特定任务。
	分布式应用正在运行的一组系统称为集群，而在集群中运行的每台机器被称为节点。
	分布式应用有两部分， Server（服务器） 和 Client（客户端） 应用程序。服务器应用程序实际上是分布式的，并具有通用接口，以便客户端可以连接到集群中的任何服务器并获得相同的结果。 客户端应用程序是与分布式应用进行交互的工具。
## kafka & zookeeper
	zookeeper 是一种分布式协调服务，用于管理大型主机，主要用来解决分布式集群中应用系统的一致性的问题，例如怎样避免同时操作同一数据造成脏读的问题。
	kafka 是一个分布式、分区的、多副本的、多订阅者，基于zookeeper协调的分布式日志系统。一个消息系统负责将数据从一个应用传递到另外一个应用，应用只需关注于数据，无需关注数据在两个或多个应用间是如何传递的。
### kafka术语解释
	1. broker。服务器节点。broker存储topic的数据。如果某topic有N个partition，集群有N个broker，那么每个broker存储该topic的一个partition。
	2. topic。每条发布到Kafka集群的消息都有一个类别，这个类别被称为Topic。
	3. partition。topic中的数据分割为一个或多个partition。
	4. Producer。生产者即数据的发布者，该角色将消息发布到Kafka的topic中。broker接收到生产者发送的消息后，broker将该消息追加到当前用于追加数据的segment文件中。生产者发送的消息，存储到一个partition中，生产者也可以指定数据存储的partition。
	5. Consumer。消费者可以从broker中读取数据。消费者可以消费多个topic中的数据。
	6. Leader。每个partition有多个副本，其中有且仅有一个作为Leader，Leader是当前负责数据的读写的partition。
	7. Follower。Follower跟随Leader，所有写请求都通过Leader路由，数据变更会广播给所有Follower，Follower与Leader保持数据同步。
### zookeeper和Kafka的关系
	1. 使用Zookeeper来进行所有Broker的管理,体现在zookeeper上会有一个专门用来进行Broker服务器列表记录的点，节点路径为/brokers/ids。
	2. 生产者负载均衡。生产者需要将消息合理的发送到分布式Broker上。
		对于生产者的负载均衡，Kafka支持传统的4层负载均衡，zookeeper同时也支持zookeeper方式来实现负载均衡。
			i. 传统的4层负载均衡. 根据生产者的IP地址和端口来为其定一个相关联的Broker,通常一个生产者只会对应单个Broker,只需要维护单个TCP链接。
			ii. 使用zookeeper进行负载均衡。生产者通过监听zookeeper上Broker节点感知Broker，Topic的状态，变更，来实现动态负载均衡机制.
	3. 消费者的负载均衡和生产负载均衡类似。
### kafka的消息传递模式
#### 点对点传递模式
	1. 在点对点消息系统中，消息持久化到一个队列中。
	2. 有一个或多个消费者消费队列中的数据。
	3. 一条消息只能被消费一次。
	4. 该模式即使有多个消费者同时消费数据，也能保证数据处理的顺序。
	5. 生产者发送一条消息到queue，只有一个消费者能收到。
#### 发布-订阅模式
	1. 消息的生产者称为发布者，消费者称为订阅者
	2. 消息被持久化到一个topic中。
	3. 消费者可以订阅一个或多个topic，消费者可以消费该topic中所有的数据，同一条数据可以被多个消费者消费，数据被消费后不会立马删除。
	4. 发布者发送到topic的消息，只有订阅了topic的订阅者才会收到消息。
### kafka的优点
	1. 解耦。消息系统在处理过程中间插入了一个隐含的、基于数据的接口层，两边的处理过程都要实现这一接口。
	2. 冗余（副本）。消息队列把数据进行持久化直到它们已经被完全处理，通过这一方式规避了数据丢失风险。许多消息队列所采用的"插入-获取-删除"范式中，在把一个消息从队列中删除之前，需要你的处理系统明确的指出该消息已经被处理完毕，从而确保你的数据被安全的保存直到你使用完毕。
	3. 扩展性。增大消息入队和处理的频率是很容易的。
	4. 灵活性&峰值处理能力。使用消息队列能够使关键组件顶住突发的访问压力，而不会因为突发的超负荷的请求而完全崩溃。
	5. 可恢复性。即使一个处理消息的进程挂掉，加入队列中的消息仍然可以在系统恢复后被处理。
	6. 顺序保证。大部分消息队列本来就是排序的，并且能保证数据会按照特定的顺序来处理。Kafka保证一个Partition内的消息的有序性。
	7. 缓冲。消息队列通过一个缓冲层来帮助任务最高效率的执行。
	8. 异步通信。消息队列提供了异步处理机制，允许用户把一个消息放入队列，但并不立即处理它。
### 常用message queue对比
#### RabbitMQ
#### Redis
#### ZeroMQ
#### ActiveMQ
#### Kafka/Jafka
